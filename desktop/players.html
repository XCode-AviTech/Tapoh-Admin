<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../assets/images/logo.png" type="image/x-icon">
  <title>Players | Tapoh Fc</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet" href="../assets/css/admin.css">
  <link rel="stylesheet" href="../assets/css/orient.css">
  
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar p-3" id="sidebar">

    <div class="logo">
      <img src="../assets/images/logo.png" alt="">
      <div class="info">
        <h4>Tapoh Fc</h4>
        <p>Content Mgt Panel</p>
      </div>
    </div>

    <hr>

    <ul class="nav flex-column">
      <li class="nav-item">
        <a href="./index.html" class="nav-link">
          <i class="bi bi-speedometer2"></i>
          <span>Dashboard</span>
        </a>
      </li>
      
      <li class="nav-item">
        <a href="./mgt.html" class="nav-link">
          <i class="bi bi-briefcase"></i>
          <span>Management</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./shop.html" class="nav-link">
          <i class="bi bi-cart"></i>
          <span>Merchandise</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./news.html" class="nav-link">
          <i class="bi bi-newspaper"></i>
          <span>News</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./players.html" class="nav-link active">
          <i class="bi bi-people"></i>
          <span>Players</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./match.html" class="nav-link">
          <i class="bi bi-calendar-event"></i>
          <span> Matches</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./scores.html" class="nav-link">
          <i class="bi bi-trophy"></i>
          <span>Game Results</span>
        </a>
      </li> 

      <li class="nav-item">
        <a href="./gallery.html" class="nav-link">
          <i class="bi bi-upload"></i>
          <span>Gallery Uploads</span>
        </a>
      </li>
      
      <li class="nav-item">
        <a href="./review.html" class="nav-link">
          <i class="bi bi-stars"></i>
          <span>Team Reviews</span>
        </a>
      </li>

    </ul>
    
    <hr class="foot">
    
    <footer>
      <p>Tapoh FC &copy;<span id="year"></span></p>
      <p>Developed by <a href="" target="_blank" rel="noopener">X~Code</a></p>
    </footer>
  </div>

  <div class="content">
    
    <nav class="navbar navbar-expand-lg shadow-sm">
      <div class="container-fluid">
        <h5 class="banner">
          <i class="bi bi-people-fill"></i>
          <span>Player Management</span>
        </h5>
        <div class="right">
          <div class="notif">
            <a href="./notifications.html" title="Notifications">
              <i class="bi bi-bell-fill"></i>
            </a>
            <div class="notif-show"></div>
          </div>
          <div class="dropdown ms-auto">
            <a class="d-flex align-items-center dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
              <i class="bi bi-person-circle"></i>
              <span>Admin</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <a class="dropdown-item" href="./settings.html#profile">
                  <i class="bi bi-person-fill"></i>
                  <span>Profile</span>
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="./settings.html">
                  <i class="bi bi-gear-fill"></i>
                  <span>Settings</span>
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item" href="../assets/php/logout.php">
                  <i class="bi bi-door-open"></i>
                  <span>Logout</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <div class="tbl">
        <div class="add">
            <button class="add btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addModal">
                <i class="bi bi-person-plus-fill"></i>
                <span>Add Player</span>
            </button>
        </div>
        <div class="table-responsive">
            <table id="playersTable" class="table-striped border-secondary table-bordered datatables">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Photo</th>
                        <th>Name</th>
                        <th>Shirt_No</th>
                        <th>Position</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/odongo.jpg" alt=""></td>
                        <td>Odongo C Stephen</td>
                        <td class="text-center">17</td>
                        <td>GoalKeeper</td>
                        <td class="text-center"><span class="badge bg-success">Active</span></td>
                        <td class="buttons">
                            <button title="Edit Player" class="btn btn-primary edit-player"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Player" class="btn btn-danger delete-player"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/odongo.jpg" alt="" width="50" height="50"></td>
                        <td>Odongo C Stephen</td>
                        <td class="text-center">17</td>
                        <td>GoalKeeper</td>
                        <td class="text-center"><span class="badge bg-warning">Loan</span></td>
                        <td class="buttons">
                            <button title="Edit Player" class="btn btn-primary edit-player"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Player" class="btn btn-danger delete-player"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/odongo.jpg" alt="" width="50" height="50"></td>
                        <td>Odongo C Stephen</td>
                        <td class="text-center">17</td>
                        <td>GoalKeeper</td>
                        <td class="text-center"><span class="badge bg-danger">Injury</span></td>
                        <td class="buttons">
                            <button title="Edit Player" class="btn btn-primary edit-player"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Player" class="btn btn-danger delete-player"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/odongo.jpg" alt="" width="50" height="50"></td>
                        <td>Odongo C Stephen</td>
                        <td class="text-center">17</td>
                        <td>GoalKeeper</td>
                        <td class="text-center"><span class="badge bg-success">Active</span></td>
                        <td class="buttons">
                            <button title="Edit Player" class="btn btn-primary edit-player"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Player" class="btn btn-danger delete-player"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/odongo.jpg" alt="" width="50" height="50"></td>
                        <td>Odongo C Stephen</td>
                        <td class="text-center">17</td>
                        <td>GoalKeeper</td>
                        <td class="text-center"><span class="badge bg-success">Active</span></td>
                        <td class="buttons">
                            <button title="Edit Player" class="btn btn-primary edit-player"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Player" class="btn btn-danger delete-player"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/odongo.jpg" alt="" width="50" height="50"></td>
                        <td>Odongo C Stephen</td>
                        <td class="text-center">17</td>
                        <td>GoalKeeper</td>
                        <td class="text-center"><span class="badge bg-success">Active</span></td>
                        <td class="buttons">
                            <button title="Edit Player" class="btn btn-primary edit-player"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Player" class="btn btn-danger delete-player"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

        <!---Add Player-->

        <div class="modal fade" id="addModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                <div class="modal-header"><h5 class="modal-title">Add Player</h5></div>
                <div class="modal-body">
                    <form id="uploadForm">
                    <div class="mb-3">
                        <label>Photo</label>
                        <input type="file" id="uploadPhoto" class="form-control" placeholder="Upload Photo">
                    </div>
                    <div class="mb-3">
                        <label>Name</label>
                        <input type="text" id="uploadName" class="form-control" placeholder="Player Name">
                    </div>
                    <div class="mb-3">
                        <label>Shirt No</label>
                        <input type="number" id="uploadShirt" class="form-control" placeholder="Shirt No">
                    </div>
                    <div class="mb-3">
                        <label>Position</label>
                        <input type="text" id="uploadPosition" class="form-control" placeholder="Player Position">
                    </div>
                    <div class="mb-3">
                        <label>Status</label>
                        <select id="uploadStatus" class="form-select" name="status" title="Plaer Status">
                        <option value="Active">Active</option>
                        <option value="Loan">Loan</option>
                        <option value="Injury">Injury</option>
                        </select>
                    </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                    <button class="btn btn-primary" id="addPlayer">Add Player</button>
                </div>
                </div>
            </div>
            </div>


            <!-- Edit Player -->
            <div class="modal fade" id="editModal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header"><h5 class="modal-title">Edit Player</h5></div>
                    <div class="modal-body">
                        <form id="editForm">
                        <div class="mb-3">
                            <label for="Name">Name</label>
                            <input type="text" id="editName" name="edit-name" class="form-control" title="Edit Name">
                        </div>
                        <div class="mb-3">
                            <label for="Shirt">Shirt No</label>
                            <input type="number" id="editShirt" name="edit-no " class="form-control" title="Edit Shirt">
                        </div>
                        <div class="mb-3">
                            <label for="Position">Position</label>
                            <input type="text" id="editPosition" name="edt-position" class="form-control" title="Edit Position">
                        </div>
                        <div class="mb-3">
                            <label>Status</label>
                            <select id="editStatus" class="form-select" name="edit-status" title="Player Status">
                            <option value="Active">Active</option>
                            <option value="Loan">Loan</option>
                            <option value="Injury">Injury</option>
                            </select>
                        </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                        <button class="btn btn-primary" id="saveEdit">Save Changes</button>
                    </div>
                    </div>
                </div>
                </div>


            <!-- Delete Player -->
            <div class="modal fade" id="deleteModal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header"><h5 class="modal-title">Confirm Delete</h5></div>
                    <div class="modal-body">Delete <strong id="deleteName"></strong>?</div>
                    <div class="modal-footer">
                        <button class="btn btn-outline-danger" data-bs-dismiss="modal">Cancel</button>
                        <button class="btn btn-danger" id="confirmDelete">Delete</button>
                    </div>
                    </div>
                </div>
                </div>

    </div>

  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
  <script src="../assets/js/admin.js"></script>
  <script src="../assets/js/redirect.js"></script>
  <script>
  $(document).ready(function () {
    // =========================
    // Players Table
    // =========================
    let playersTable = $('#playersTable').DataTable({
      lengthMenu: [5, 10, 25, 50, 100], // Entry selector options
      pageLength: 5, // Default entries shown
      ordering: true,
      searching: true,
      info: true,
      pagingType: "simple_numbers",
      language: {
        search: "Filter Players:"
      }
    });

    // =========================
    // Add Player
    // =========================
    $("#addPlayer").on("click", function () {
      let name = $("#uploadName").val();
      let shirt = $("#uploadShirt").val();
      let position = $("#uploadPosition").val();
      let status = $("#uploadStatus").val();

      let badgeClass =
        status === "Active"
          ? "bg-success"
          : status === "Loan"
          ? "bg-warning"
          : "bg-danger";

      let newRow = playersTable.row.add([
        playersTable.rows().count() + 1,
        `<img src="../assets/images/placeholder.jpg" width="50" height="50">`,
        name,
        shirt,
        position,
        `<span class="badge ${badgeClass}">${status}</span>`,
        `<button class="btn btn-primary edit-player"><i class="bi bi-pencil-square"></i>Edit</button>
         <button class="btn btn-danger delete-player"><i class="bi bi-trash3"></i>Delete</button>`
      ]).draw().node();

      $("#uploadForm")[0].reset();
      $("#uploadModal").modal("hide");
    });

    // =========================
    // Edit Player
    // =========================
    let editRow;
    $(document).on("click", ".edit-player", function () {
      editRow = $(this).closest("tr");
      $("#editName").val(editRow.find("td:eq(2)").text());
      $("#editShirt").val(editRow.find("td:eq(3)").text());
      $("#editPosition").val(editRow.find("td:eq(4)").text());
      $("#editStatus").val(editRow.find("td:eq(5)").text().trim());
      $("#editModal").modal("show");
    });

    $("#saveEdit").on("click", function () {
      if (editRow) {
        let status = $("#editStatus").val();
        let badgeClass =
          status === "Active"
            ? "bg-success"
            : status === "Loan"
            ? "bg-warning"
            : "bg-danger";

        editRow.find("td:eq(2)").text($("#editName").val());
        editRow.find("td:eq(3)").text($("#editShirt").val());
        editRow.find("td:eq(4)").text($("#editPosition").val());
        editRow.find("td:eq(5)").html(`<span class="badge ${badgeClass}">${status}</span>`);

        playersTable.row(editRow).invalidate().draw();
        $("#editModal").modal("hide");
      }
    });

    // =========================
    // Delete Player
    // =========================
    let deleteRow;
    $(document).on("click", ".delete-player", function () {
      deleteRow = $(this).closest("tr");
      $("#deleteName").text(deleteRow.find("td:eq(2)").text());
      $("#deleteModal").modal("show");
    });

    $("#confirmDelete").on("click", function () {
      if (deleteRow) {
        playersTable.row(deleteRow).remove().draw();
        $("#deleteModal").modal("hide");
      }
    });
  });
</script>


</body>
</html>
