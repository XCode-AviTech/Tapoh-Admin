<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="./assets/images/logo.png" type="image/x-icon">
  <title>Management | Tapoh Fc</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet" href="../assets/css/mobi.css">
</head>
<body>

  <div class="header">

    <div class="logo">
      <img src="../assets/images/logo.png" alt="">
      <div class="info">
        <h4>Tapoh Fc</h4>
        <p>Content Management</p>
      </div>
    </div>

    <div class="toggle">

      <a href="../assets/php/logout.php" title="Log Out">
        <i class="bi bi-box-arrow-right"></i>
      </a>
      <span id="menuToggle" class="menu-icon">&#9776;</span> <!-- Hamburger icon -->
    </div>

    <ul id="navMenu" class="nav-links">
      <li><a href="./index.html">Dashboard</a></li> 
      <li><a href="./mgt.html" class="active">Management</a></li>
      <li><a href="./shop.html">Merchandise</a></li>
      <li><a href="./news.html">News</a></li>
      <li><a href="./players.html">Players</a></li>
      <li><a href="./match.html">Matches</a></li>
      <li><a href="./scores.html">Game Results</a></li> 
      <li><a href="./gallery.html">Gallery Uploads</a></li>
      <li><a href="./settings.html">Settings</a></li>
    </ul>

  </div>

  <div class="contents">

    
    <nav class="navbar shadow-sm">
      <h5 class="banner">
          <i class="bi bi-briefcase-fill"></i>
          <span>Management</span>
      </h5>
    </nav>

    <div class="tbl">
        <div class="add">
            <button class="add btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addModal">
                <i class="bi bi-person-plus-fill"></i><span>Add Member</span>
            </button>
        </div>
        <div class="table-responsive">
            <table id="employeeTable" class="table-striped border-secondary table-bordered datatables">
                <thead>
                    <tr>
                        <th>#</th>
                        <th class="img">Photo</th>
                        <th>Surname</th>
                        <th>Last-Name</th>
                        <th>Role</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <td>1</td>
                        <td class="img"><img src="../assets/images/odongo.jpg" alt=""></td>
                        <td>Osia</td>
                        <td>Brian</td>
                        <td>CEO</td>
                        <td class="buttons">
                            <button title="Edit Employee" class="btn btn-primary edit-employee"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Employee" class="btn btn-danger delete-employee"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

        <!-- ADD MEMBER MODAL -->
<div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="addModalLabel">Add Member</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="addForm">
          <div class="mb-3">
            <label class="form-label">Surname</label>
            <input type="text" class="form-control" id="addSurname" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Last Name</label>
            <input type="text" class="form-control" id="addLastName" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Role</label>
            <input type="text" class="form-control" id="addRole" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Message</label>
            <textarea class="form-control" id="addMessage" rows="4"></textarea>
          </div>
          <button type="submit" class="btn btn-success">Add Member</button>
        </form>
      </div>
    </div>
  </div>
</div>

        <!-- Read Message Modal -->
<div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="messageModalLabel">Message Details</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p id="fullMessage"></p>
      </div>
    </div>
  </div>
</div>

<!-- Edit Employee Modal -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="editModalLabel">Edit Employee</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="editForm">
          <div class="mb-3">
            <label class="form-label">Surname</label>
            <input type="text" class="form-control" id="editSurname">
          </div>
          <div class="mb-3">
            <label class="form-label">Last Name</label>
            <input type="text" class="form-control" id="editLastName">
          </div>
          <div class="mb-3">
            <label class="form-label">Role</label>
            <input type="text" class="form-control" id="editRole">
          </div>
          <div class="mb-3">
            <label class="form-label">Message</label>
            <textarea class="form-control" id="editMessage" rows="4"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete <strong id="deleteEmployee"></strong>?</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button class="btn btn-danger" id="confirmDelete">Delete</button>
      </div>
    </div>
  </div>
</div>

    </div>

  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
  <script src="../assets/js/mobile.js"></script>
  <script src="../assets/js/redirect.js"></script>
  <script>
$(document).ready(function () {
  let table = $('#employeeTable').DataTable({
    
    lengthMenu: [5, 10, 25, 50, 100], 
      pageLength: 5,
    "lengthChange": true,
    "ordering": true,
    "searching": true, 
    "info": true,
    "pagingType": "simple_numbers",
  });

  // ADD EMPLOYEE
  $("#addForm").on("submit", function (e) {
    e.preventDefault();
    let surname = $("#addSurname").val();
    let lastname = $("#addLastName").val();
    let role = $("#addRole").val();
    let message = $("#addMessage").val();
    table.row.add([
      table.rows().count() + 1,
      surname,
      lastname,
      role,
      message,
      `<button class="btn btn-success read-message"><i class="bi bi-eye"></i>Read</button>
       <button class="btn btn-primary edit-employee"><i class="bi bi-pencil-square"></i>Edit</button>
       <button class="btn btn-danger delete-employee"><i class="bi bi-trash3"></i>Delete</button>`
    ]).draw();
    $("#addModal").modal("hide");
    this.reset();
  });

  // READ
  $(document).on("click", ".read-message", function () {
    let fullText = $(this).closest("tr").find("td:eq(4)").text().trim();
    $("#fullMessage").text(fullText);
    $("#messageModal").modal("show");
  });

  // EDIT
  let editRow;
  $(document).on("click", ".edit-employee", function () {
    editRow = $(this).closest("tr");
    $("#editSurname").val(editRow.find("td:eq(1)").text());
    $("#editLastName").val(editRow.find("td:eq(2)").text());
    $("#editRole").val(editRow.find("td:eq(3)").text());
    $("#editMessage").val(editRow.find("td:eq(4)").text().trim());
    $("#editModal").modal("show");
  });

  $("#editForm").on("submit", function (e) {
    e.preventDefault();
    editRow.find("td:eq(1)").text($("#editSurname").val());
    editRow.find("td:eq(2)").text($("#editLastName").val());
    editRow.find("td:eq(3)").text($("#editRole").val());
    editRow.find("td:eq(4)").text($("#editMessage").val());
    $("#editModal").modal("hide");
  });

  // DELETE
  let deleteRow;
  $(document).on("click", ".delete-employee", function () {
    deleteRow = $(this).closest("tr");
    let name = deleteRow.find("td:eq(1)").text() + " " + deleteRow.find("td:eq(2)").text();
    $("#deleteEmployee").text(name);
    $("#deleteModal").modal("show");
  });

  $("#confirmDelete").on("click", function () {
    table.row(deleteRow).remove().draw();
    $("#deleteModal").modal("hide");
  });
});
</script>


</body>
</html>
