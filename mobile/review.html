<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../assets/images/logo.png" type="image/x-icon">
  <title>Reviews | Tapoh Fc</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet" href="../assets/css/admin.css">
  <link rel="stylesheet" href="../assets/css/orient.css">
  
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar p-3" id="sidebar">

    <div class="logo">
      <img src="../assets/images/logo.png" alt="">
      <div class="info">
        <h4>Tapoh Fc | Admin </h4>
        <p>Content Mgt Panel</p>
      </div>
    </div>

    <hr>

    <ul class="nav flex-column">
      <li class="nav-item">
        <a href="./index.html" class="nav-link">
          <i class="bi bi-speedometer2"></i>
          <span>Dashboard</span>
        </a>
      </li>
      
      <li class="nav-item">
        <a href="./mgt.html" class="nav-link">
          <i class="bi bi-briefcase"></i>
          <span>Management</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./shop.html" class="nav-link">
          <i class="bi bi-cart"></i>
          <span>Merchandise</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./news.html" class="nav-link">
          <i class="bi bi-newspaper"></i>
          <span>News</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./players.html" class="nav-link">
          <i class="bi bi-people"></i>
          <span>Players</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./match.html" class="nav-link">
          <i class="bi bi-calendar-event"></i>
          <span> Matches</span>
        </a>
      </li>

      <li class="nav-item">
        <a href="./scores.html" class="nav-link">
          <i class="bi bi-trophy"></i>
          <span>Game Results</span>
        </a>
      </li> 

      <li class="nav-item">
        <a href="./gallery.html" class="nav-link">
          <i class="bi bi-upload"></i>
          <span>Gallery Uploads</span>
        </a>
      </li>
      
      <li class="nav-item">
        <a href="./review.html" class="nav-link active">
          <i class="bi bi-stars"></i>
          <span>Team Reviews</span>
        </a>
      </li>

    </ul>
    <footer>
      <p>Tapoh FC &copy;<span id="year"></span></p>
      <p>Developed by <a href="" target="_blank" rel="noopener">X~Code</a></p>
    </footer>
  </div>

  <div class="content">
    
    <nav class="navbar navbar-expand-lg shadow-sm">
      <div class="container-fluid">
        <h5 class="banner">
          <i class="bi bi-stars"></i>
          <span>Reviews</span>
        </h5>
        <div class="right">
          <div class="notif">
            <a href="./notifications.html" title="Notifications">
              <i class="bi bi-bell-fill"></i>
            </a>
            <div class="notif-show"></div>
          </div>
          <div class="dropdown ms-auto">
            <a class="d-flex align-items-center dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
              <i class="bi bi-person-circle"></i>
              <span>Admin</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <a class="dropdown-item" href="./settings.html#profile">
                  <i class="bi bi-person-fill"></i>
                  <span>Profile</span>
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="./settings.html">
                  <i class="bi bi-gear-fill"></i>
                  <span>Settings</span>
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item" href="../assets/php/logout.php">
                  <i class="bi bi-door-open"></i>
                  <span>Logout</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <div class="tbl">
        <div class="table-responsive">
            <table id="reviewTable" class="table-striped border-secondary table-bordered datatables">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Stars</th>
                        <th>Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <td>1</td>
                        <td>Ssonko Duncan</td>
                        <td class="text-center">
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star-fill text-warning"></i>
                            <i class="bi bi-star text-warning"></i>
                            <i class="bi bi-star text-warning"></i>
                        </td>
                        <td class="text-center">11/12/2025</td>
                        <td class="buttons">
                            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#readModal"><i class="bi bi-eye"></i><span>Read Review</span></button>
                            <button class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteModal"><i class="bi bi-trash3"></i><span>Delete Review</span></button>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

        <!-- Read Modal -->
  <div class="modal fade" id="readModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">Read Review</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p><strong>Fan:</strong> John Doe</p>
          <p><strong>Review:</strong> Amazing match! Loved the atmosphere and the energy.</p>
          <p><strong>Rating:</strong> ⭐⭐⭐⭐</p>
          <p><strong>Match/Event:</strong> Finals 2025</p>
          <p><strong>Date:</strong> 2025-09-28</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div class="modal fade" id="editModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <form class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">Edit Review</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal">&CircleTimes;</button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Fan Name</label>
            <input type="text" class="form-control" value="John Doe">
          </div>
          <div class="mb-3">
            <label class="form-label">Review</label>
            <textarea class="form-control">Amazing match! Loved the atmosphere and the energy.</textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Rating</label>
            <select class="form-select">
              <option>⭐⭐⭐⭐⭐</option>
              <option selected>⭐⭐⭐⭐</option>
              <option>⭐⭐⭐</option>
              <option>⭐⭐</option>
              <option>⭐</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Match/Event</label>
            <input type="text" class="form-control" value="Finals 2025">
          </div>
          <div class="mb-3">
            <label class="form-label">Date</label>
            <input type="date" class="form-control" value="2025-09-28">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Delete Modal -->
  <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-danger text-white">
          <h5 class="modal-title">Delete Review</h5>
          <button class="btn-close" data-bs-dismiss="modal">&CircleTimes;</button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete this review?</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button class="btn btn-danger">Delete</button>
        </div>
      </div>
    </div>
  </div>


    </div>

  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
  <script src="../assets/js/admin.js"></script>
  <script src="../assets/js/redirect.js"></script>
  <script>
$(document).ready(function () {
    let reviewTable = $('#reviewTable').DataTable({
        pageLength: 5,
        lengthMenu: [5, 10, 25, 50, 100],
        ordering: true,
        searching: false,
        info: true,
        pagingType: "simple_numbers",
        language: {
            lengthMenu: "Show _MENU_ reviews per page",
            info: "Showing _START_ to _END_ of _TOTAL_ reviews"
        }
    });

    // --- Read Review ---
    $(document).on("click", ".btn-primary", function () {
        let row = $(this).closest("tr");
        let name = row.find("td:eq(1)").text();
        let stars = row.find("td:eq(2)").html();
        let review = row.find("td:eq(3)").text();
        let date = row.find("td:eq(4)").text();

        $("#readModal .modal-body").html(`
            <p><strong>Fan:</strong> ${name}</p>
            <p><strong>Review:</strong> ${review}</p>
            <p><strong>Rating:</strong> ${stars}</p>
            <p><strong>Date:</strong> ${date}</p>
        `);
        $("#readModal").modal("show");
    });

    // --- Edit Review ---
    let editRow;
    $(document).on("click", ".btn-primary[data-bs-target='#editModal']", function () {
        editRow = $(this).closest("tr");
        $("#editModal input:eq(0)").val(editRow.find("td:eq(1)").text());
        $("#editModal textarea").val(editRow.find("td:eq(3)").text());

        // Extract stars count
        let starCount = editRow.find("td:eq(2) .bi-star-fill").length;
        $("#editModal select").val("⭐".repeat(starCount));

        $("#editModal input[type=date]").val(editRow.find("td:eq(4)").text());
        $("#editModal").modal("show");
    });

    $("#editModal .btn-primary").on("click", function () {
        if (editRow) {
            let name = $("#editModal input:eq(0)").val();
            let review = $("#editModal textarea").val();
            let rating = $("#editModal select").val();
            let date = $("#editModal input[type=date]").val();

            // Convert rating stars to icons
            let starHtml = "";
            let filled = (rating.match(/⭐/g) || []).length;
            for (let i = 0; i < filled; i++) starHtml += `<i class="bi bi-star-fill text-warning"></i>`;
            for (let i = filled; i < 5; i++) starHtml += `<i class="bi bi-star text-warning"></i>`;

            editRow.find("td:eq(1)").text(name);
            editRow.find("td:eq(2)").html(starHtml);
            editRow.find("td:eq(3)").text(review);
            editRow.find("td:eq(4)").text(date);

            reviewTable.row(editRow).invalidate().draw();
            $("#editModal").modal("hide");
        }
    });

    // --- Delete Review ---
    let deleteRow;
    $(document).on("click", ".btn-danger", function () {
        deleteRow = $(this).closest("tr");
        $("#deleteModal .modal-body").html(`
            <p>Are you sure you want to delete the review by <strong>${deleteRow.find("td:eq(1)").text()}</strong>?</p>
        `);
        $("#deleteModal").modal("show");
    });

    $("#deleteModal .btn-danger").on("click", function () {
        if (deleteRow) {
            reviewTable.row(deleteRow).remove().draw();
            $("#deleteModal").modal("hide");
        }
    });
});
</script>


</body>
</html>
