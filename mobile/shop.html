<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../assets/images/logo.png" type="image/x-icon">
  <title>Shop | Tapoh Fc</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet" href="../assets/css/mobi.css">
  
</head>
<body>

  <div class="header">

    <div class="logo">
      <img src="../assets/images/logo.png" alt="">
      <div class="info">
        <h4>Tapoh Fc</h4>
        <p>Content Management</p>
      </div>
    </div>

    <div class="toggle">

      <a href="../assets/php/logout.php" title="Log Out">
        <i class="bi bi-box-arrow-right"></i>
      </a>
      <span id="menuToggle" class="menu-icon">&#9776;</span> <!-- Hamburger icon -->
    </div>

    <ul id="navMenu" class="nav-links">
      <li><a href="./index.html">Dashboard</a></li> 
      <li><a href="./mgt.html">Management</a></li>
      <li><a href="./shop.html" class="active">Merchandise</a></li>
      <li><a href="./news.html">News</a></li>
      <li><a href="./players.html">Players</a></li>
      <li><a href="./match.html">Matches</a></li>
      <li><a href="./scores.html">Game Results</a></li> 
      <li><a href="./gallery.html">Gallery Uploads</a></li>
      <li><a href="./settings.html">Settings</a></li>
    </ul>

  </div>

  <div class="contents">

    <nav class="navbar shadow-sm">
      <h5 class="banner">
        <i class="bi bi-cart-fill"></i>
        <span>Merchandise / Shop</span>
      </h5>
    </nav>

    <div class="tbl">
        <div class="add">
            <button class="add btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addModal">
                <i class="bi bi-cart-plus"></i>
                <span>Add Item</span>
            </button>
        </div>
        <div class="table-responsive">
            <table id="shopTable" class="table-striped border-secondary table-bordered datatables">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Photo</th>
                        <th>Title</th>
                        <th>Price (UGX)</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/sampo.jpg" alt=""></td>
                        <td class="text-center">Home Kit</td>
                        <td class="text-center">35000</td>
                        <td class="buttons">
                            <button title="Edit Upload" class="btn btn-primary edit-photo"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Upload" class="btn btn-danger delete-photo"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/sampo.jpg" alt="" width="50"></td>
                        <td class="text-center">Home Kit</td>
                        <td class="text-center">35000</td>
                        <td class="buttons">
                            <button title="Edit Upload" class="btn btn-primary edit-photo"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Upload" class="btn btn-danger delete-photo"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/sampo.jpg" alt="" width="50"></td>
                        <td class="text-center">Home Kit</td>
                        <td class="text-center">35000</td>
                        <td class="buttons">
                            <button title="Edit Upload" class="btn btn-primary edit-photo"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Upload" class="btn btn-danger delete-photo"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/sampo.jpg" alt="" width="50"></td>
                        <td class="text-center">Home Kit</td>
                        <td class="text-center">35000</td>
                        <td class="buttons">
                            <button title="Edit Upload" class="btn btn-primary edit-photo"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Upload" class="btn btn-danger delete-photo"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/sampo.jpg" alt="" width="50"></td>
                        <td class="text-center">Home Kit</td>
                        <td class="text-center">35000</td>
                        <td class="buttons">
                            <button title="Edit Upload" class="btn btn-primary edit-photo"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Upload" class="btn btn-danger delete-photo"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>1</td>
                        <td><img src="../assets/images/sampo.jpg" alt="" width="50"></td>
                        <td class="text-center">Home Kit</td>
                        <td class="text-center">35000</td>
                        <td class="buttons">
                            <button title="Edit Upload" class="btn btn-primary edit-photo"><i class="bi bi-pencil-square"></i><span>Edit</span></button>
                            <button title="Delete Upload" class="btn btn-danger delete-photo"><i class="bi bi-trash3"></i><span>Delete</span></button>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

        <!---Add Item-->

        <div class="modal fade" id="addModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                <div class="modal-header"><h5 class="modal-title">Add Item</h5></div>
                <div class="modal-body">
                    <form id="uploadForm">
                        <div class="mb-3">
                            <label>Photo</label>
                            <input type="file" id="photo" class="form-control" placeholder="Photo">
                        </div>
                        <div class="mb-3">
                            <label>Title</label>
                            <input type="text" id="title" class="form-control" placeholder="Title">
                        </div>
                        
                        <div class="mb-3">
                            <label>Price</label>
                            <input type="number" id="price" class="form-control" placeholder="Price">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                    <button class="btn btn-primary" id="upload">Add</button>
                </div>
                </div>
            </div>
            </div>


            <!-- Edit Item -->
            <div class="modal fade" id="editModal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header"><h5 class="modal-title">Edit Item</h5></div>
                    <div class="modal-body">
                        <form id="editForm">

                            <div class="mb-3">
                                <label>Photo</label>
                                <input type="file" id="editPhoto" class="form-control" placeholder="Photo">
                            </div>
                            <div class="mb-3">
                                <label>Title</label>
                                <input type="text" id="editTitle" class="form-control" placeholder="Title">
                            </div>
                            
                            <div class="mb-3">
                                <label>Price</label>
                                <input type="number" id="editPrice" class="form-control" placeholder="Price">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                        <button class="btn btn-primary" id="saveEdit">Save Changes</button>
                    </div>
                    </div>
                </div>
                </div>


            <!-- Delete match -->
            <div class="modal fade" id="deleteModal" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header"><h5 class="modal-title">Confirm Delete</h5></div>
                    <div class="modal-body">Delete <strong id="deleteName"></strong>?</div>
                    <div class="modal-footer">
                        <button class="btn btn-outline-danger" data-bs-dismiss="modal">Cancel</button>
                        <button class="btn btn-danger" id="confirmDelete">Delete</button>
                    </div>
                    </div>
                </div>
                </div>

    </div>

  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
  <script src="../assets/js/mobile.js"></script>
  <script src="../assets/js/redirect.js"></script>
  <script>
$(document).ready(function () {
    let shopTable = $('#shopTable').DataTable({
        pageLength: 10,
        lengthMenu: [5, 10, 25, 50, 100],
        ordering: true,
        searching: false,
        info: false,
        pagingType: "simple_numbers"
    });

    // --- Add Item ---
    $("#upload").on("click", function () {
        let caption = $("#title").val();
        let location = $("#price").val();
        let photo = $("#photo").val() || "../assets/images/placeholder.jpg";

        let newRow = shopTable.row.add([
            shopTable.rows().count() + 1,
            `<img src="${photo}" width="50" height="50">`,
            caption,
            location,
            `<button class="btn btn-primary edit-photo"><i class="bi bi-pencil-square"></i>Edit</button>
             <button class="btn btn-danger delete-photo"><i class="bi bi-trash3"></i>Delete</button>`
        ]).draw().node();

        $("#uploadForm")[0].reset();
        $("#uploadModal").modal("hide");
    });

    // --- Edit Photo ---
    let editRow;
    $(document).on("click", ".edit-photo", function () {
        editRow = $(this).closest("tr");
        $("#editTitle").val(editRow.find("td:eq(2)").text());
        $("#editPrice").val(editRow.find("td:eq(3)").text());
        $("#editModal").modal("show");
    });

    $("#saveEdit").on("click", function () {
        if (editRow) {
            editRow.find("td:eq(2)").text($("#editTitle").val());
            editRow.find("td:eq(3)").text($("#editPrice").val());

            shopTable.row(editRow).invalidate().draw();
            $("#editModal").modal("hide");
        }
    });

    // --- Delete Photo ---
    let deleteRow;
    $(document).on("click", ".delete-photo", function () {
        deleteRow = $(this).closest("tr");
        $("#deleteName").text(deleteRow.find("td:eq(2)").text());
        $("#deleteModal").modal("show");
    });

    $("#confirmDelete").on("click", function () {
        if (deleteRow) {
            shopTable.row(deleteRow).remove().draw();
            $("#deleteModal").modal("hide");
        }
    });
});
</script>


</body>
</html>
